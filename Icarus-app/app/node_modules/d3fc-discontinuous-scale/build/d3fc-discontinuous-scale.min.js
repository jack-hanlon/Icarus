!function(n,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("d3-scale"),require("d3fc-rebind"),require("d3-time")):"function"==typeof define&&define.amd?define(["exports","d3-scale","d3fc-rebind","d3-time"],t):t(n.fc=n.fc||{},n.d3,n.fc,n.d3)}(this,function(n,t,e,r){"use strict";function i(n,t){var e=[],r=!0,i=!1,o=void 0;try{for(var u,a=n[Symbol.iterator]();!(r=(u=a.next()).done);r=!0){var c=u.value,f=t.clampUp(c);f===t.clampDown(c)&&e.push(f)}}catch(n){i=!0,o=n}finally{try{!r&&a.return&&a.return()}finally{if(i)throw o}}return e}function o(n){var r=this;arguments.length||(n=t.scaleIdentity());var a=u(),c=function(t){var e=n.domain(),r=n.range(),i=a.distance(e[0],e[1]);return a.distance(e[0],t)/i*(r[1]-r[0])+r[0]};return c.invert=function(t){var e=n.domain(),r=n.range(),i=(t-r[0])/(r[1]-r[0]),o=a.distance(e[0],e[1]),u=i*o;return a.offset(e[0],u)},c.domain=function(){if(!arguments.length)return n.domain();var t=arguments.length<=0?void 0:arguments[0],e=a.clampUp(t[0]),r=a.clampDown(t[1]);return n.domain([e,r]),c},c.nice=function(){n.nice();var t=n.domain(),e=a.clampUp(t[0]),r=a.clampDown(t[1]);return n.domain([e,r]),c},c.ticks=function(){for(var t=arguments.length,e=Array(t),o=0;o<t;o++)e[o]=arguments[o];return i(n.ticks.apply(r,e),a)},c.copy=function(){return o(n.copy()).discontinuityProvider(a.copy())},c.discontinuityProvider=function(){return arguments.length?(a=arguments.length<=0?void 0:arguments[0],c):a},e.rebindAll(c,n,e.include("range","rangeRound","interpolate","clamp","tickFormat")),c}var u=function(){var n={};return n.distance=function(n,t){return t-n},n.offset=function(n,t){return n instanceof Date?new Date(n.getTime()+t):n+t},n.clampUp=function(n){return n},n.clampDown=function(n){return n},n.copy=function(){return n},n},a=function(){var n={sunday:0,monday:1,saturday:6},t={},e=function(n){return 0===n.getDay()||6===n.getDay()};return t.clampDown=function(t){if(t&&e(t)){var i=r.timeDay.ceil(t);return i.getDay()===n.sunday?r.timeDay.offset(i,-1):i.getDay()===n.monday?r.timeDay.offset(i,-2):i}return t},t.clampUp=function(t){if(t&&e(t)){var i=r.timeDay.floor(t);return i.getDay()===n.saturday?r.timeDay.offset(i,2):i.getDay()===n.sunday?r.timeDay.offset(i,1):i}return t},t.distance=function(n,e){n=t.clampUp(n),e=t.clampDown(e);var i=r.timeSaturday.ceil(n);if(e<i)return e.getTime()-n.getTime();var o=i.getTime()-n.getTime(),u=r.timeSaturday.ceil(e),a=u.getTime()-e.getTime();return 432e6*Math.round((u.getTime()-i.getTime())/6048e5)+o-a},t.offset=function(n,i){var o=e(n)?t.clampUp(n):n;if(0===i)return o;var u=i<0,a=i>0,c=i,f=u?r.timeMonday.floor(o):r.timeSaturday.ceil(o);if(c-=f.getTime()-o.getTime(),u&&c>0||a&&c<0)return new Date(o.getTime()+i);o=u?f:r.timeDay.offset(f,2);var d=Math.floor(c/432e6);return o=r.timeDay.offset(o,7*d),c-=432e6*d,o=new Date(o.getTime()+c)},t.copy=function(){return t},t},c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},f=function(){for(var n=arguments.length,t=Array(n),e=0;e<n;e++)t[e]=arguments[e];var r=function(n,t){return n>t[0]&&n<t[1]},i=function(n,t){return n[0]>=t[0]&&n[1]<=t[1]},o={};o.distance=function(n,e){n=o.clampUp(n),e=o.clampDown(e);var r=t.filter(function(t){return i(t,[n,e])}),u=r.map(function(n){return n[1]-n[0]});return e-n-u.reduce(function(n,t){return n+t},0)};var u=function(n,t){return n instanceof Date?new Date(n.getTime()+t):n+t};return o.offset=function(n,e){if(e>0){var r=function(){for(var r=o.clampUp(n),i=e;i>0;){var a=t.filter(function(n){return n[0]>r}).sort(function(n,t){return n[0]-t[0]});if(a.length){var c=a[0],f=c[0]-r;f>i?(r=u(r,i),i=0):(r=c[1],i-=f)}else r=u(r,i),i=0}return{v:r}}();if("object"===(void 0===r?"undefined":c(r)))return r.v}else{var i=function(){for(var r=o.clampDown(n),i=e;i<0;){var a=t.filter(function(n){return n[1]<r}).sort(function(n,t){return t[0]-n[0]});if(a.length){var c=a[0],f=c[1]-r;f<i?(r=u(r,i),i=0):(r=c[0],i-=f)}else r=u(r,i),i=0}return{v:r}}();if("object"===(void 0===i?"undefined":c(i)))return i.v}},o.clampUp=function(n){return t.reduce(function(n,t){return r(n,t)?t[1]:n},n)},o.clampDown=function(n){return t.reduce(function(n,t){return r(n,t)?t[0]:n},n)},o.copy=function(){return o},o};n.scaleDiscontinuous=o,n.discontinuitySkipWeekends=a,n.discontinuityIdentity=u,n.discontinuityRange=f,Object.defineProperty(n,"__esModule",{value:!0})});